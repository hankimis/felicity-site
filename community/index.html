<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ïò®ÎπÑÌä∏ - Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ Ï∞®Ìä∏</title>
    
    <!-- ÏΩòÏÜî Î°úÍ∑∏ Ìè≠Ï£º Î∞©ÏßÄ: Î™®Îì† Ïô∏Î∂Ä Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎî© Ï†ÑÏóê log/info/debug Î¨¥Ïùå Ï≤òÎ¶¨ -->
    <script>
      (function(){
        try {
          var isDebug = /[?&]debug=1/.test(location.search) || localStorage.getItem('DEBUG') === '1';
          window.__IS_DEBUG__ = isDebug;
          if (!isDebug) {
            var noop = function(){};
            console.log = noop;
            console.info = noop;
            console.debug = noop;
          }
        } catch (_) {}
      })();
    </script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-functions-compat.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="../css/base/_variables.css" />
    <link rel="stylesheet" href="../css/base/_reset.css" />
    <link rel="stylesheet" href="../css/base/_base.css" />
    
    <!-- Layout CSS -->
    <link rel="stylesheet" href="../css/layout/_header.css" />
    <link rel="stylesheet" href="../css/layout/_main.css" />
    
    <!-- Component CSS -->
    <link rel="stylesheet" href="../components/header/navbar.css" />
    <link rel="stylesheet" href="../css/components/_modal.css" />
        <link rel="stylesheet" href="../community/community.css" />
    <link rel="stylesheet" href="../css/components/chat.css" />
    <link rel="stylesheet" href="../css/components/chart.css" />
    
    <!-- üî• Í≥†Îûò Ï∂îÏ†ÅÍ∏∞ CSS Ï∂îÍ∞Ä -->
    <link rel="stylesheet" href="../css/whale-tracker.css" />
    
    <!-- üî• TradingView Ïã¨Î≥º ÏïÑÏù¥ÏΩò CSS -->
    <link rel="stylesheet" href="../css/tradingview-symbol-icons.css" />
    
    <!-- Page CSS -->
    <!-- Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÌååÏùº Í≤ΩÎ°ú Ï†úÍ±∞: ../css/pages/_community.css -->

    
    <!-- Auth CSS -->
    <link rel="stylesheet" href="../auth.css" />
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="/onbit/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/onbit/favicon.svg" />
    <link rel="shortcut icon" href="/onbit/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/onbit/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Onbit" />
    <link rel="manifest" href="/onbit/site.webmanifest" />
    
    <!-- External Scripts -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    
    <!-- TradingView Charting Library -->
    <script type="text/javascript" src="../charting_library-master/charting_library/charting_library.standalone.js"></script>
    <script type="text/javascript" src="../charting_library-master/datafeeds/udf/dist/bundle.js"></script>
    
    
    <!-- Chart Scripts -->
    <script src="../js/binance-datafeed.js"></script>
    <script src="../js/multi-exchange-datafeed.js"></script>
    <script src="../js/chart-storage.js"></script>
    
    <script src="../js/market-data-manager.js"></script>
    <script src="../js/chart-save-manager.js"></script>
    
    <!-- Common Scripts -->
    <script src="../js/auth.js"></script>
    <script src="../js/websocket-manager.js"></script>
    <!-- Unified Header Loader -->
    <script src="../components/header/header-loader.js" defer></script>
    
    <!-- Firebase ÏÑ§Ï†ï -->
    <script>
        // Firebase ÏÑ§Ï†ïÏù¥ auth.jsÏóêÏÑú Î°úÎìúÎêòÍ∏∞Î•º Í∏∞Îã§Î¶º
        document.addEventListener('DOMContentLoaded', function() {
            // FirebaseÍ∞Ä ÏôÑÏ†ÑÌûà Ï¥àÍ∏∞ÌôîÎê† ÎïåÍπåÏßÄ ÎåÄÍ∏∞
            const waitForFirebase = () => {
                if (window.firebase && window.firebase.apps && window.firebase.apps.length > 0) {
            // Firebase Database Ï¥àÍ∏∞Ìôî ÌôïÏù∏
                    if (!window.database) {
                window.database = window.firebase.database();
                console.log('Community: Firebase Database Ï¥àÍ∏∞ÌôîÎê®');
            }
                } else {
                    console.log('Firebase Ï¥àÍ∏∞Ìôî ÎåÄÍ∏∞ Ï§ë...');
                    setTimeout(waitForFirebase, 100);
                }
            };
            waitForFirebase();
        });
    </script>
</head>
<body>
    <!-- Header placeholder -->
    <div id="header-placeholder"></div>

    <main class="main-container">
        <div class="community-layout">
            <div class="community-layout-inner">
                <section class="chart-section">
                    <div class="chart-trading-layout">
                        <div id="chart-container-wrapper">
                            <!-- Ï∞®Ìä∏ Ìó§ÎçîÏôÄ Î†àÏù¥ÏïÑÏõÉ Î≤ÑÌäºÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                            <div id="tradingview_chart"></div>
                            <div class="chart-loading" id="chart-loading">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</div>
                            <!-- ‚úÖ Ï∞®Ìä∏ ÌïòÎã® Ìè¨ÏßÄÏÖò Î∞î -->
                            <section id="positions-under-chart" class="positions-under-chart">
                                <div class="positions-bar-header">
                                    <div class="pos-tabs" role="tablist">
                                        <button class="pos-tab active" data-pos-tab="positions">Î≥¥Ïú† Ìè¨ÏßÄÏÖò</button>
                                        <button class="pos-tab" data-pos-tab="orders">Ïò§Ìîà Ïò§Îçî</button>
                                        <button class="pos-tab" data-pos-tab="history">Í±∞Îûò ÎÇ¥Ïó≠</button>
                                    </div>
                                    <div class="actions">
                                        <button id="pt-close-all" class="btn secondary">Ï†ÑÎüâ Ï≤≠ÏÇ∞</button>
                                    </div>
                                </div>
                                <div class="positions-table">
                                    <div class="positions-table-head positions-wide">
                                        <div>Í±∞ÎûòÏåç</div>
                                        <div>Ìè¨ÏßÄÏÖò</div>
                                        <div>ÏßÑÏûÖÍ∞Ä</div>
                                        <div>ÌòÑÏû¨Í∞Ä</div>
                                        <div>ÏòàÏÉÅ Ï≤≠ÏÇ∞Í∞Ä</div>
                                        <div>ÎßàÏßÑ</div>
                                        <div>Í∞ÄÏö© ÏàòÎüâ</div>
                                        <div>ÎØ∏Ïã§ÌòÑ ÏÜêÏùµ</div>
                                        <div>Ï±ÑÍµ¥</div>
                                        <div>ÏãúÏû•Í∞Ä Ï≤≠ÏÇ∞</div>
                                        <div>Ï≤≠ÏÇ∞Í∞Ä</div>
                                        <div>Ï≤≠ÏÇ∞ ÏàòÎüâ</div>
                                        <div>Ï≤≠ÏÇ∞</div>
                                    </div>
                                    <div id="positions-table-body" class="positions-table-body"></div>
                                </div>
                                <!-- Ïò§Ìîà Ïò§Îçî ÌÖåÏù¥Î∏î (Ï¥àÍ∏∞ Ïà®ÍπÄ) -->
                                <div class="orders-table" style="display:none;">
                                    <div class="orders-table-head">
                                        <div>Pairs</div>
                                        <div>Time</div>
                                        <div>Type</div>
                                        <div>Direction</div>
                                        <div>Avg. Price</div>
                                        <div>Filled | Size</div>
                                        <div>Trigger Price</div>
                                        <div>Order Price</div>
                                        <div>Frozen Margin</div>
                                        <div>Fee</div>
                                        <div>Action</div>
                                    </div>
                                    <div id="orders-table-body" class="orders-table-body"></div>
                                </div>
                                <!-- Í±∞Îûò ÎÇ¥Ïó≠ ÌÖåÏù¥Î∏î (Ï¥àÍ∏∞ Ïà®ÍπÄ) -->
                                <div class="history-table" style="display:none;">
                                    <div class="orders-table-head">
                                        <div>Pairs</div>
                                        <div>Time</div>
                                        <div>Direction</div>
                                        <div>Avg. Price | Type</div>
                                        <div>Filled | Size</div>
                                        <div>PnL | PnL%</div>
                                        <div>Fee</div>
                                    </div>
                                    <div id="history-table-body" class="orders-table-body"></div>
                                </div>
                            </section>
                        </div>
                        <aside id="paper-trading-sidebar" class="paper-trading-sidebar">
                            <!-- Ï£ºÎ¨∏/Ïò§ÎçîÎ∂Å Ìå®ÎÑê -->
                            <div class="orderbook-and-trade">
                                <div class="orderbook-panel">
                                    <div class="panel-header">
                                        <div class="tabs" role="tablist">
                                            <button class="tab active" data-tab="orderbook">Ïò§ÎçîÎ∂Å</button>
                                            <button class="tab" data-tab="whale">Ïã§ÏãúÍ∞Ñ Í≥†Îûò ÌÉêÏßÄ</button>
                                        </div>
                                    </div>
                                    <div class="orderbook-body" id="orderbook-body">
                                        <div class="orderbook-table">
                                            <div class="ob-header">
                                                <div>Price</div>
                                                <div>Quantity (BTC)</div>
                                                <div>Total (BTC)</div>
                                            </div>
                                            <div id="orderbook-rows" class="ob-rows"></div>
                                            <div class="ob-footer">
                                                <div class="ratio">
                                                    <span class="buy-label">B <span id="ob-buy-ratio">--</span>%</span>
                                                    <div class="ratio-bar">
                                                        <span id="ob-buy-bar"></span>
                                                        <span id="ob-sell-bar"></span>
                                                    </div>
                                                    <span class="sell-label"><span id="ob-sell-ratio">--</span>% S</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="orderbook-body" id="whale-tab-body" style="display:none;">
                                        <div class="whale-trades-wrapper">
                                            <div id="whale-trades-container" class="whale-trades-container">
                                                <div class="whale-trades-list"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Ï£ºÎ¨∏ Ìå®ÎÑê: Ïò§ÎçîÎ∂Å/Í≥†ÎûòÌÉ≠ ÏïÑÎûòÎ°ú Ïù¥Îèô -->
                                <section class="trade-panel">
                        <div class="trade-header">
                            <div class="header-controls">
                                <button id="btn-mode-cross" class="seg-btn active">ÍµêÏ∞®</button>
                                <button id="btn-mode-isolated" class="seg-btn">Í≥†Î¶Ω</button>
                            </div>
                        </div>
                        <div class="lev-control">
                            <span class="label">Î†àÎ≤ÑÎ¶¨ÏßÄ</span>
                            <div class="input-wrap">
                                <input type="number" id="lev-value" class="lev-display" min="1" max="200" step="1" value="15" />
                                <span class="unit-suffix">Î∞∞</span>
                            </div>
                            <div class="percent-slider lev-slider">
                                <input type="range" id="lev-percent" min="0" max="100" step="1" value="0" />
                                <div class="ticks"><span>1Î∞∞</span><span>45Î∞∞</span><span>100Î∞∞</span><span>150Î∞∞</span><span>200Î∞∞</span></div>
                            </div>
                        </div>

                        <div class="order-type-tabs" role="tablist">
                            <button class="order-type active" data-type="limit">Limit</button>
                            <button class="order-type" data-type="market">Market</button>
                        </div>

                        <div class="order-form" id="order-form">
                            <label class="field">
                                <span class="label">Price (USDT)</span>
                                <div class="input-wrap">
                                    <input type="number" step="any" id="pt-price" placeholder="ÏãúÏû•Í∞Ä" />
                                </div>
                            </label>
                            <label class="field">
                                <span class="label">Amount (BTC)</span>
                                <div class="input-wrap">
                                    <input type="text" id="pt-amount-percent" placeholder="0%" />
                                    <input type="number" step="0.0001" id="pt-amount" placeholder="> 0.0001 BTC" style="display:none;" />
                                </div>
                                <div id="pt-amount-error" class="field-error" style="display:none;">Order amount cannot be empty</div>
                            </label>
                            <div class="percent-slider">
                                <input type="range" id="pt-percent" min="0" max="100" step="1" value="0" />
                                <div class="ticks"><span>0%</span><span>25%</span><span>50%</span><span>75%</span><span>100%</span></div>
                            </div>

                            <div class="balances">
                                <div>Í∞ÄÏö© ÏûêÏÇ∞: <span id="pt-balance">-</span> USDT</div>
                                <div>Ìà¨ÏûÖ Ï¶ùÍ±∞Í∏à: <span id="pt-cost">-</span> USDT</div>
                            </div>
                            <div class="balances fee-preview">
                                <div>ÏàòÏàòÎ£å Í∏∞Ï§Ä: <span id="pt-fee-basis">--</span></div>
                                <div>ÏòàÏÉÅ ÏàòÏàòÎ£å: <span id="pt-fee-estimate">--</span> USDT</div>
                            </div>

                            <div class="action-buttons">
                                <button id="pt-open-long" class="btn long">Open Long</button>
                                <button id="pt-open-short" class="btn short">Open Short</button>
                            </div>
                        </div>
                    </section>
                            </div>
                        </aside>
                    </div>
                </section>
                <!-- Í≥†Îûò ÌÉêÏßÄÏôÄ Ï±ÑÌåÖÏùÑ ÏúÑÌïú Ïª®ÌÖåÏù¥ÎÑà -->
                <section class="whale-chat-container">
                    <!-- Ïò§Î•∏Ï™Ω: ÏûîÍ≥†Îßå ÌëúÏãú (Ï£ºÎ¨∏ ÏÑπÏÖò ÏôÑÏ†Ñ Ï†úÍ±∞) -->
                    <section style="padding: 10px 8px;">
                        <section id="account-panel" class="account-panel">
                            <div class="balance-header">
                                <div class="balance-title">ÎßàÏßÑ ÏûîÍ≥†</i></div>
                                <div class="balance-amount">
                                    <span id="acc-equity-big">0</span>
                                    <span class="unit">USDT</span>
                                </div>
                            </div>
                            <div class="balance-grid">
                                <div class="balance-item">
                                    <div class="label">ÏßÄÍ∞ë ÏûîÍ≥†</div>
                                    <div class="value" id="acc-wallet">$0.00</div>
                                </div>
                                <div class="balance-item" style="text-align:center">
                                    <div class="label">ONBIT Ï±ÑÍµ¥</div>
                                    <div class="value" id="acc-onbit" style="color: var(--primary-color);">0.000 ONBIT</div>
                                </div>
                                <div class="balance-item">
                                    <div class="label">ÎØ∏Ïã§ÌòÑ ÏÜêÏùµ</div>
                                    <div class="value up" id="acc-upnl-big">+$0.00</div>
                                </div>
                            </div>
                        </section>
                    </section>
                    
                    
                    <!-- Íµ¨Î∂ÑÏÑ† -->
                    <div class="section-divider"></div>
                    
                    <!-- Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ ÏÑπÏÖò - ÎÜíÏù¥ ÌôïÏû• -->
                    <section class="chat-section" style="flex: 1;">
                        <div class="chat-section-header">
                            <h2>Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ</h2>
                            <div class="chat-header-controls">
                                <div class="chat-users-count">
                                    <i class="fas fa-user"></i>
                                    <span id="chat-users-count">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="chat-wrapper">
                            <div id="chat-messages"></div>
                            <form id="chat-form" class="chat-input-form">
                                <input type="text" id="message-input" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." autocomplete="off">
                                <button type="submit">Ï†ÑÏÜ°</button>
                            </form>
                        </div>
                    </section>
                </section>
            </div>
        </div>
    </main>

    <!-- Í≥†Îûò Í±∞Îûò ÏÑ§Ï†ï Î™®Îã¨ -->
    <div id="whale-settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Í≥†Îûò Í±∞Îûò Ï∂îÏ†Å ÏÑ§Ï†ï</h2>
                <button class="modal-close" id="close-whale-settings">&times;</button>
            </div>
            <div class="modal-body">
                <div id="whale-settings-list">
                    <!-- ÏÑ§Ï†ï Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-whale-settings" class="btn btn-primary">ÏÑ§Ï†ï Ï†ÄÏû•</button>
            </div>
        </div>
    </div>



    <!-- Whale Tracker Script -->
    <script src="../js/analysis/whale-tracker.js" type="module"></script>
    
    <!-- Custom Scripts -->
    <script src="../js/paper-config.js"></script>
    <script src="../js/paper-market.js"></script>
    <script src="../js/paper-risk.js"></script>
    <script src="../js/paper-ui.js"></script>
    <script src="../js/paper-order.js"></script>
    <script type="module" src="../js/onbit-miner.js"></script>
    <script src="../js/paper-trading.js"></script>
    <script src="../js/trade-notifier.js"></script>
    <script src="../js/community.js"></script>
    <script src="../js/community-chat.js"></script>
    
    
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const body = document.body;
        const menuButton = document.getElementById('mobile-menu-button');
        const closeButton = document.getElementById('mobile-menu-close');
        const mobileMenu = document.getElementById('mobile-menu');

        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', () => {
                mobileMenu.classList.add('is-open');
                body.classList.add('mobile-menu-open');
            });
        }

        if (closeButton && mobileMenu) {
            closeButton.addEventListener('click', () => {
                mobileMenu.classList.remove('is-open');
                body.classList.remove('mobile-menu-open');
            });
        }

        // Ï∞®Ìä∏ Ï†ÄÏû• Í¥ÄÎ¶¨ Î™®Îã¨ Ïù¥Î≤§Ìä∏
        const chartSaveModal = document.getElementById('chart-save-modal');
        const manualSaveBtn = document.getElementById('manual-save-btn');
        const refreshChartsBtn = document.getElementById('refresh-charts-btn');
        const savedChartsList = document.getElementById('saved-charts-list');

        // ÏàòÎèô Ï†ÄÏû• Î≤ÑÌäº
        if (manualSaveBtn) {
            manualSaveBtn.addEventListener('click', async () => {
                if (window.chartSaveManager) {
                    const success = await window.chartSaveManager.manualSave();
                    if (success) {
                        refreshSavedChartsList();
                    }
                }
            });
        }

        // Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº
        if (refreshChartsBtn) {
            refreshChartsBtn.addEventListener('click', refreshSavedChartsList);
        }

        // Ï†ÄÏû•Îêú Ï∞®Ìä∏ Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®
        async function refreshSavedChartsList() {
            if (!window.chartSaveManager || !savedChartsList) return;

            try {
                const charts = await window.chartSaveManager.getSavedCharts();
                
                if (charts.length === 0) {
                    savedChartsList.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: var(--text-color-secondary);">
                            <i class="fas fa-chart-line" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p>Ï†ÄÏû•Îêú Ï∞®Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                        </div>
                    `;
                    return;
                }

                savedChartsList.innerHTML = charts.map(chart => `
                    <div class="saved-chart-item" style="
                        display: flex; 
                        align-items: center; 
                        justify-content: space-between; 
                        padding: 12px; 
                        border: 1px solid var(--border-color); 
                        border-radius: 8px; 
                        margin-bottom: 8px;
                        background: var(--card-bg);
                    ">
                        <div>
                            <div style="font-weight: 600; color: var(--text-color);">
                                ${chart.symbol} (${chart.interval})
                            </div>
                            <div style="font-size: 12px; color: var(--text-color-secondary);">
                                ${chart.timestamp ? chart.timestamp.toLocaleString() : 'Ïïå Ïàò ÏóÜÏùå'}
                            </div>
                        </div>
                        <div>
                            <button class="chart-settings-btn secondary" onclick="loadSavedChart('${chart.id}')" style="margin-right: 8px;">
                                <i class="fas fa-download"></i> Î∂àÎü¨Ïò§Í∏∞
                            </button>
                            <button class="chart-settings-btn" onclick="deleteSavedChart('${chart.id}')" style="background: var(--error-color);">
                                <i class="fas fa-trash"></i> ÏÇ≠Ï†ú
                            </button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Ï∞®Ìä∏ Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìå®:', error);
                savedChartsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--error-color);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 16px;"></i>
                        <p>Î™©Î°ùÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                `;
            }
        }

        // Ï†ÑÏó≠ Ìï®ÏàòÎ°ú Îì±Î°ù
        window.loadSavedChart = async (chartId) => {
            // Íµ¨ÌòÑ ÏòàÏ†ï
            console.log('Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞:', chartId);
        };

        window.deleteSavedChart = async (chartId) => {
            if (confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                if (window.chartSaveManager) {
                    const success = await window.chartSaveManager.deleteSavedChart(chartId);
                    if (success) {
                        refreshSavedChartsList();
                    }
                }
            }
        };

        // Î™®Îã¨Ïù¥ Ïó¥Î¶¥ Îïå Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    if (chartSaveModal && chartSaveModal.style.display !== 'none') {
                        refreshSavedChartsList();
                    }
                }
            });
        });

        if (chartSaveModal) {
            observer.observe(chartSaveModal, { attributes: true });
        }


      });
    </script>
    <div id="rocket-overlay" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; pointer-events:none; z-index:2000;"></div>
</body>
</html> 