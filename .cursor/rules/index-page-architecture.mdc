# ğŸ  INDEX PAGE ARCHITECTURE RULES
## Felicity-Site ë©”ì¸ í˜ì´ì§€ ìµœì í™” ê°€ì´ë“œ

---

## ğŸ“‹ **ëª©ì°¨**
1. [ğŸ¯ í•µì‹¬ ì›ì¹™](#í•µì‹¬-ì›ì¹™)
2. [ğŸ—ï¸ êµ¬ì¡° ë° ì•„í‚¤í…ì²˜](#êµ¬ì¡°-ë°-ì•„í‚¤í…ì²˜)
3. [ğŸ¨ CSS ê´€ë¦¬ ê·œì¹™](#css-ê´€ë¦¬-ê·œì¹™)
4. [âš¡ ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
5. [ğŸ“± ë°˜ì‘í˜• ë””ìì¸](#ë°˜ì‘í˜•-ë””ìì¸)
6. [ğŸš€ JavaScript ìµœì í™”](#javascript-ìµœì í™”)
7. [ğŸ”§ ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ](#ìœ ì§€ë³´ìˆ˜-ê°€ì´ë“œ)

---

## ğŸ¯ **í•µì‹¬ ì›ì¹™**

### âœ… **DO (ê¶Œì¥ì‚¬í•­)**
- **CSS ë¶„ë¦¬**: ëª¨ë“  ìŠ¤íƒ€ì¼ì€ `css/pages/_index.css`ì— ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬
- **ëª¨ë“ˆí™”**: ê° ì„¹ì…˜ë³„ë¡œ ëª…í™•í•œ CSS í´ë˜ìŠ¤ ë„¤ì´ë° ì‚¬ìš©
- **ì„±ëŠ¥ ìš°ì„ **: Critical CSSë§Œ ì¸ë¼ì¸ìœ¼ë¡œ ìœ ì§€
- **ë°˜ì‘í˜• ìš°ì„ **: ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸ ì ‘ê·¼ë²• ì ìš©
- **ì ‘ê·¼ì„±**: ARIA ë¼ë²¨ê³¼ ì‹œë§¨í‹± HTML ì‚¬ìš©
- **ìºì‹± ìµœì í™”**: ë‰´ìŠ¤/ì´ë²¤íŠ¸ ë°ì´í„° ìºì‹± ì „ëµ í™œìš©

### âŒ **DON'T (ê¸ˆì§€ì‚¬í•­)**
- ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ë‚¨ìš© ê¸ˆì§€
- ì¤‘ë³µ CSS ì½”ë“œ ì‘ì„± ê¸ˆì§€
- í•˜ë“œì½”ë”©ëœ ê°’ ì‚¬ìš© ê¸ˆì§€ (CSS ë³€ìˆ˜ í™œìš©)
- ë¶ˆí•„ìš”í•œ DOM ì¡°ì‘ ê¸ˆì§€
- ë™ê¸°ì‹ API í˜¸ì¶œ ê¸ˆì§€

---

## ğŸ—ï¸ **êµ¬ì¡° ë° ì•„í‚¤í…ì²˜**

### ğŸ“ **íŒŒì¼ êµ¬ì¡°**
```
index.html                 # ë©”ì¸ HTML (ìµœì†Œí•œì˜ ì¸ë¼ì¸ CSSë§Œ)
css/pages/_index.css       # ë©”ì¸ í˜ì´ì§€ ì „ìš© CSS
js/
â”œâ”€â”€ analysis/             # ë¶„ì„ ê´€ë ¨ ëª¨ë“ˆ
â”œâ”€â”€ compound-calculator.js # ë³µë¦¬ ê³„ì‚°ê¸°
â”œâ”€â”€ header-loader.js      # í—¤ë” ë¡œë”©
â”œâ”€â”€ footer-loader.js      # í‘¸í„° ë¡œë”©
â””â”€â”€ ...
```

### ğŸ¯ **ì„¹ì…˜ë³„ êµ¬ì¡°**
```html
<!-- 1. ë©”ì¸ ë°°ë„ˆ -->
<section class="main-banner">
  <video class="banner-video">
  <div class="banner-content">
    <div class="banner-text">
    <div class="banner-cta">
    <div class="banner-exchanges">

<!-- 2. ì‹¤ì‹œê°„ ì¶”ì  ì„¹ì…˜ -->
<section class="realtime-section">
  <div class="realtime-grid">
    <div class="longshort-container">
    <div class="whale-container">
    <div class="compound-calculator-container">

<!-- 3. ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
<section class="dashboard-section">
  <div class="dashboard-grid">
    <div class="chart-container">
    <div class="news-container">
    <div class="indices-container">

<!-- 4. ì½”ì¸ í…Œì´ë¸” ì„¹ì…˜ -->
<section class="crypto-table-section">
  <div class="crypto-table-wrapper">
```

---

## ğŸ¨ **CSS ê´€ë¦¬ ê·œì¹™**

### ğŸ·ï¸ **ë„¤ì´ë° ì»¨ë²¤ì…˜**
```css
/* ì„¹ì…˜ ë ˆë²¨ */
.main-banner { }
.realtime-section { }
.dashboard-section { }
.crypto-table-section { }

/* ì»¨í…Œì´ë„ˆ ë ˆë²¨ */
.banner-content { }
.realtime-grid { }
.dashboard-grid { }
.crypto-table-wrapper { }

/* ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ */
.news-item { }
.event-item { }
.coin-info { }
.chart-controls { }

/* ìƒíƒœ í´ë˜ìŠ¤ */
.loading { }
.active { }
.disabled { }
.positive { }
.negative { }
```

### ğŸ¨ **CSS ë³€ìˆ˜ í™œìš©**
```css
:root {
  /* ìƒ‰ìƒ ì‹œìŠ¤í…œ */
  --bg-primary: #ffffff;
  --text-primary: #1f2937;
  --accent-blue: #3b82f6;
  
  /* ê°„ê²© ì‹œìŠ¤í…œ */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  
  /* ê·¸ë¦¼ì ì‹œìŠ¤í…œ */
  --shadow-light: rgba(0, 0, 0, 0.08);
  --shadow-medium: rgba(0, 0, 0, 0.12);
}
```

### ğŸ“± **ë°˜ì‘í˜• ë¸Œë ˆì´í¬í¬ì¸íŠ¸**
```css
/* ë°ìŠ¤í¬í†± ìš°ì„  */
@media (max-width: 1024px) { /* íƒœë¸”ë¦¿ */ }
@media (max-width: 768px)  { /* ëª¨ë°”ì¼ */ }
@media (max-width: 360px)  { /* ì´ˆì†Œí˜• ëª¨ë°”ì¼ */ }

/* íŠ¹ë³„ ì¼€ì´ìŠ¤ */
@media (min-width: 768px) and (max-width: 1024px) { /* íƒœë¸”ë¦¿ë§Œ */ }
@media (prefers-reduced-motion: reduce) { /* ì• ë‹ˆë©”ì´ì…˜ ë¹„í™œì„±í™” */ }
```

---

## âš¡ **ì„±ëŠ¥ ìµœì í™”**

### ğŸš€ **Critical CSS ì „ëµ**
```html
<!-- ì¸ë¼ì¸ Critical CSS (Above-the-fold ì½˜í…ì¸ ë§Œ) -->
<style>
  /* CSS ë³€ìˆ˜ */
  :root { --bg-primary: #ffffff; }
  
  /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ */
  * { box-sizing: border-box; }
  body { background: var(--bg-primary); }
  
  /* ë©”ì¸ ë°°ë„ˆ (Above-the-fold) */
  .main-banner { height: 500px; }
  .loading-skeleton { animation: loading 1.5s infinite; }
</style>

<!-- ë‚˜ë¨¸ì§€ CSSëŠ” ì™¸ë¶€ íŒŒì¼ë¡œ -->
<link rel="stylesheet" href="css/pages/_index.css">
```

### ğŸ“Š **ë‰´ìŠ¤ ë¡œë”© ìµœì í™”**
```javascript
// ë‹¨ê³„ë³„ ë¡œë”© ì „ëµ
async loadFreshNews(isBackgroundUpdate = false) {
  // 1ë‹¨ê³„: ë¹ ë¥¸ í”¼ë“œ 4ê°œ (2ì´ˆ íƒ€ì„ì•„ì›ƒ)
  const fastFeeds = feeds.slice(0, 4);
  const fastResults = await Promise.all(fastPromises);
  
  // ì¦‰ì‹œ í‘œì‹œ
  if (allNews.length > 0 && !isBackgroundUpdate) {
    this.displayNews(cacheData.data);
  }
  
  // 2ë‹¨ê³„: ë‚˜ë¨¸ì§€ í”¼ë“œ ë°±ê·¸ë¼ìš´ë“œ ë¡œë”© (3ì´ˆ íƒ€ì„ì•„ì›ƒ)
  const slowFeeds = feeds.slice(4);
  const slowResults = await Promise.all(slowPromises);
}
```

### ğŸ¯ **ì´ë¯¸ì§€ ìµœì í™”**
```css
/* ì§€ì—° ë¡œë”© */
.news-image img,
.event-image img {
  loading: lazy;
  decoding: async;
}

/* í´ë°± ì²˜ë¦¬ */
.news-image img {
  onerror="this.parentElement.style.display='none'";
}
```

---

## ğŸ“± **ë°˜ì‘í˜• ë””ìì¸**

### ğŸ¯ **ëª¨ë°”ì¼ ìš°ì„  ì „ëµ**
```css
/* ëª¨ë°”ì¼ì—ì„œ ë¶ˆí•„ìš”í•œ ì„¹ì…˜ ìˆ¨ê¸°ê¸° */
@media (max-width: 768px) {
  .realtime-section {
    display: none; /* ë³µì¡í•œ ì‹¤ì‹œê°„ ë°ì´í„°ëŠ” ëª¨ë°”ì¼ì—ì„œ ì œì™¸ */
  }
  
  .main-banner .exchange-item:nth-child(n+3) {
    display: none; /* 3ë²ˆì§¸ ì´í›„ ê±°ë˜ì†Œ ë¡œê³  ìˆ¨ê¹€ */
  }
}
```

### ğŸ“Š **í…Œì´ë¸” ë°˜ì‘í˜• ì²˜ë¦¬**
```css
/* ëª¨ë°”ì¼ í…Œì´ë¸” ìŠ¤í¬ë¡¤ */
@media (max-width: 768px) {
  .crypto-table-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .crypto-table {
    min-width: 900px; /* ìµœì†Œ ë„ˆë¹„ ë³´ì¥ */
  }
  
  /* ìŠ¤í¬ë¡¤ íŒíŠ¸ */
  .crypto-table-wrapper::after {
    content: "â† ì¢Œìš°ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ë” ë§ì€ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš” â†’";
  }
}
```

---

## ğŸš€ **JavaScript ìµœì í™”**

### ğŸ¯ **ëª¨ë“ˆ ë¡œë”© ì „ëµ**
```javascript
// ì§€ì—° ë¡œë”©
document.addEventListener('DOMContentLoaded', function() {
  // ì¦‰ì‹œ í•„ìš”í•œ ê²ƒë§Œ ë¡œë”©
  initializeTradingViewChart('BTCUSDT');
  
  // ë‚˜ë¨¸ì§€ëŠ” ì§€ì—° ë¡œë”©
  setTimeout(() => {
    dashboard = new Dashboard();
  }, 1000);
  
  setTimeout(() => {
    cryptoTable = new CryptoTable();
  }, 2000);
});
```

### ğŸ“Š **ìºì‹± ì „ëµ**
```javascript
// ë‰´ìŠ¤ ìºì‹±
const CACHE_KEY = 'indexNewsFeedsCache';
const CACHE_DURATION_MS = 3 * 60 * 1000; // 3ë¶„

// ìºì‹œ ìš°ì„  í‘œì‹œ
if (cached && cacheData.data.length > 0) {
  this.displayNews(cacheData.data); // ì¦‰ì‹œ í‘œì‹œ
  
  // ë§Œë£Œëœ ê²½ìš° ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸
  if (age >= CACHE_DURATION_MS) {
    setTimeout(() => this.loadFreshNews(true), 100);
  }
}
```

### ğŸ”„ **ì—ëŸ¬ ì²˜ë¦¬**
```javascript
// ì•ˆì „í•œ API í˜¸ì¶œ
async fetchAndParseFeed({ url, source }) {
  for (let retry = 0; retry <= maxRetries; retry++) {
    try {
      // API í˜¸ì¶œ ë¡œì§
      return processedItems;
    } catch (error) {
      if (retry === maxRetries) {
        console.warn(`âŒ ${source}: ìµœì¢… ì‹¤íŒ¨ - ${error.message}`);
        return []; // ë¹ˆ ë°°ì—´ ë°˜í™˜ìœ¼ë¡œ ì•ˆì „ ì²˜ë¦¬
      }
      
      // ì¬ì‹œë„ ëŒ€ê¸°
      await new Promise(resolve => 
        setTimeout(resolve, 500 * (retry + 1))
      );
    }
  }
}
```

---

## ğŸ”§ **ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ**

### ğŸ¯ **ìƒˆ ì„¹ì…˜ ì¶”ê°€ ì‹œ**
1. **HTML êµ¬ì¡° ìƒì„±**
```html
<section class="new-section">
  <div class="new-section-container">
    <div class="section-header">
      <h3 class="section-title">ìƒˆ ì„¹ì…˜</h3>
    </div>
    <div class="section-content">
      <!-- ì½˜í…ì¸  -->
    </div>
  </div>
</section>
```

2. **CSS ì¶”ê°€** (`css/pages/_index.css`)
```css
/* ===================================================================
 * NEW SECTION
 * ================================================================= */
.new-section {
  margin: 2rem 0;
  padding: 0 1rem;
  max-width: 1800px;
  margin-left: auto;
  margin-right: auto;
}

.new-section-container {
  background: var(--bg-primary);
  border-radius: 12px;
  box-shadow: 0 4px 20px var(--shadow-light);
  overflow: hidden;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .new-section {
    padding: 0 0.5rem;
  }
}
```

3. **JavaScript ì¶”ê°€**
```javascript
class NewSectionManager {
  constructor() {
    this.init();
  }
  
  init() {
    this.bindEvents();
    this.loadData();
  }
  
  async loadData() {
    try {
      // ë°ì´í„° ë¡œë”© ë¡œì§
    } catch (error) {
      console.error('New section ë¡œë”© ì‹¤íŒ¨:', error);
      this.displayFallback();
    }
  }
}
```

### ğŸ¨ **ìŠ¤íƒ€ì¼ ìˆ˜ì • ì‹œ**
```css
/* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìˆ˜ì • ì‹œ ì£¼ì„ ì¶”ê°€ */
.existing-class {
  /* ê¸°ì¡´ ì†ì„± */
  color: var(--text-primary);
  
  /* 2024-01-15: ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¶”ê°€ */
  font-weight: 600;
  
  /* 2024-01-15: ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•´ ìˆ˜ì • */
  transition: all 0.2s ease; /* ê¸°ì¡´: 0.3s */
}
```

### ğŸ” **ë””ë²„ê¹… ê°€ì´ë“œ**
```javascript
// ê°œë°œ ëª¨ë“œì—ì„œë§Œ ë””ë²„ê¹… ë¡œê·¸
if (process.env.NODE_ENV === 'development') {
  console.log('ğŸ“° ë‰´ìŠ¤ ë¡œë”© ìƒíƒœ:', {
    cached: !!cached,
    newsCount: allNews.length,
    successfulFeeds: successCount
  });
}

// ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
performance.mark('news-load-start');
await this.loadFreshNews();
performance.mark('news-load-end');
performance.measure('news-load-time', 'news-load-start', 'news-load-end');
```

---

## ğŸ“Š **ì„±ëŠ¥ ì§€í‘œ ëª©í‘œ**

### ğŸ¯ **Core Web Vitals**
- **LCP (Largest Contentful Paint)**: < 2.5ì´ˆ
- **FID (First Input Delay)**: < 100ms
- **CLS (Cumulative Layout Shift)**: < 0.1

### ğŸ“± **ëª¨ë°”ì¼ ìµœì í™”**
- **First Paint**: < 1ì´ˆ
- **ë‰´ìŠ¤ ë¡œë”©**: < 2ì´ˆ (ìºì‹œ ì‚¬ìš© ì‹œ ì¦‰ì‹œ)
- **ì°¨íŠ¸ ë¡œë”©**: < 3ì´ˆ

### ğŸ”„ **ìºì‹± íš¨ìœ¨ì„±**
- **ë‰´ìŠ¤ ìºì‹œ íˆíŠ¸ìœ¨**: > 80%
- **ì´ë¯¸ì§€ ë¡œë”© ì„±ê³µë¥ **: > 95%
- **API ì‹¤íŒ¨ìœ¨**: < 5%

---

## ğŸš¨ **ì£¼ì˜ì‚¬í•­**

### âš ï¸ **Critical Issues**
1. **CSS ë¶„ë¦¬ í•„ìˆ˜**: ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ìµœì†Œí™”
2. **ì„±ëŠ¥ ìš°ì„ **: ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ë¡œë”© ê¸ˆì§€
3. **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë“  API í˜¸ì¶œì— ì ì ˆí•œ fallback ì œê³µ
4. **ë°˜ì‘í˜•**: ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ì •ìƒ ì‘ë™ ë³´ì¥

### ğŸ”’ **ë³´ì•ˆ ê³ ë ¤ì‚¬í•­**
- ì™¸ë¶€ API í˜¸ì¶œ ì‹œ CORS í”„ë¡ì‹œ ì‚¬ìš©
- ì‚¬ìš©ì ì…ë ¥ ë°ì´í„° ê²€ì¦
- XSS ë°©ì§€ë¥¼ ìœ„í•œ HTML ì´ìŠ¤ì¼€ì´í•‘

---

## ğŸ‰ **ê²°ë¡ **

ì´ ê·œì¹™ì„ ë”°ë¼ index.htmlì„ ê´€ë¦¬í•˜ë©´:
- âœ… **ì„±ëŠ¥**: ë¹ ë¥¸ ë¡œë”©ê³¼ ë°˜ì‘ì„±
- âœ… **ìœ ì§€ë³´ìˆ˜**: ëª…í™•í•œ êµ¬ì¡°ì™€ ëª¨ë“ˆí™”
- âœ… **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´ì„±
- âœ… **ì•ˆì •ì„±**: ì—ëŸ¬ ì²˜ë¦¬ì™€ fallback ë³´ì¥

**Remember**: ì„±ëŠ¥ê³¼ ì‚¬ìš©ì ê²½í—˜ì´ ìµœìš°ì„ ! ğŸš€
description:
globs:
alwaysApply: false
---
